{% extends "_base.html" %}

{% block content %}

<div class="body-content">
  <div class="row">
    <h1>Findings</h1>

    <ul class="nav nav-tabs" tole="tablist">
        <li><a href="/transaction">Transactions</a></li>
        <li class="active"><a href="/defect">Defects</a></li>
        <li><a href="/link">Links</a></li>
    </ul>

    <h2>Defects</h2>
    <table border="1" class="table table-striped table-bordered">
        <thead>
            <tr>
                <th>URI</th>
                <th class="dropdown">
                    <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu2" data-toggle="dropdown" aria-haspopusp="true" aria-expanded="false">
                        Type
                        <span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu" aria-labelledby="dropdownMenu2" id="dtype">
                        {% for type in types %}
                            <li><a href="?t={{type}}">{{type}}</a></li>
                        {% endfor %}
                        <li><a href="/defect">No filter</a></li>                
                    </ul>
                </th>
                <th>Evidence</th>
                <th>Severity</th>
                <th>Go to transaction</th>
            </tr>
        </thead>
        <tbody>
            {% for defect in defects.items %}
                <tr>
                    <td> {{defect.uri}} </td>
                    <td> {{defect.type}}: {{defect.description}} </td>
                    <td> {{defect.evidence}} </td>
                    <td> {{defect.severity}} </td>
                    <td><a href="/finding/{{defect.responseId}}">></a></td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
    <p>Page {{defects.page}} / {{defects.pages}}
       {% if defects.page != 1 %} <a href="/defect/page/{{defects.prev_num}}">Previous</a> {% endif %}
       {% if defects.page != defects.pages %} <a href="/defect/page/{{defects.next_num}}">Next</a> {% endif %}</p>
  </div>
</div>

{% endblock %}
